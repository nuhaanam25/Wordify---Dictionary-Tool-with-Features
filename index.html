<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dictionary & Translator</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        :root {
            --bg-color: #f3f4f6;
            --card-bg-color: #ffffff;
            --text-color: #1f2937;
            --text-muted-color: #6b7280;
            --border-color: #e5e7eb;
            --input-bg-color: #f9fafb;
            --primary-color: #805C94;
            --primary-hover-color: #715285;
            --primary-light-color: rgba(128, 92, 148, 0.15);
            --primary-text-color: #805C94;
        }

        html.dark:root {
            --bg-color: #111827;
            --card-bg-color: #1f2937;
            --text-color: #f9fafb;
            --text-muted-color: #9ca3af;
            --border-color: #374151;
            --input-bg-color: #374151;
            --primary-light-color: rgba(128, 92, 148, 0.2);
            --primary-text-color: #c7a9d9;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            padding: 1rem;
            transition: background-color 0.3s, color 0.3s;
        }

        .container { width: 100%; max-width: 42rem; margin: 0 auto; }

        .card {
            position: relative;
            background-color: var(--card-bg-color);
            border-radius: 1rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            padding: 2rem;
            transition: background-color 0.3s, box-shadow 0.3s;
            overflow: hidden;
        }

        .top-buttons { position: absolute; top: 1rem; right: 1rem; display: flex; gap: 0.5rem; z-index: 10; }

        .icon-button { background-color: var(--card-bg-color); border: 1px solid var(--border-color); border-radius: 0.5rem; padding: 0.5rem; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: background-color 0.2s, border-color 0.2s, transform 0.2s; }
        .icon-button:hover { background-color: var(--input-bg-color); transform: scale(1.05); }
        .icon-button svg { width: 20px; height: 20px; color: var(--text-muted-color); }

        h1 { font-size: 2.25rem; font-weight: 700; text-align: center; margin-bottom: 0.5rem; padding-top: 2rem; }
        .subtitle { text-align: center; color: var(--text-muted-color); margin-bottom: 1.5rem; }

        .search-container { position: relative; display: flex; align-items: center; margin-bottom: 1.5rem; }
        .word-input { width: 100%; padding: 0.75rem 9.5rem 0.75rem 1rem; font-size: 1.125rem; background-color: var(--input-bg-color); border: 2px solid var(--border-color); border-radius: 0.75rem; color: var(--text-color); transition: border-color 0.2s, box-shadow 0.2s, background-color 0.3s; }
        .word-input:focus { outline: none; border-color: transparent; box-shadow: 0 0 0 3px var(--primary-light-color); }

        .input-controls { position: absolute; right: 0.5rem; display: flex; align-items: center; gap: 0.25rem; }
        .mic-button { background: none; border: none; padding: 0.5rem; border-radius: 50%; cursor: pointer; transition: background-color 0.2s; }
        .mic-button:hover { background-color: rgba(0,0,0,0.1); }
        .mic-button svg { width: 24px; height: 24px; stroke: var(--text-muted-color); }
        .mic-active { animation: pulse 1.5s infinite; }
        .mic-active svg { stroke: #ef4444; }
        @keyframes pulse { 0% { box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.7); } 70% { box-shadow: 0 0 0 10px rgba(239, 68, 68, 0); } 100% { box-shadow: 0 0 0 0 rgba(239, 68, 68, 0); } }

        .search-button { padding: 0.5rem 1rem; background: linear-gradient(to right, #805C94, #6a4e7e); color: white; font-weight: 600; border: none; border-radius: 0.5rem; cursor: pointer; transition: transform 0.2s, box-shadow 0.2s; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        .search-button:hover { transform: translateY(-2px); box-shadow: 0 7px 10px rgba(0,0,0,0.1); }
        
        .hidden { display: none; }
        .space-y-6 > * + * { margin-top: 1.5rem; }
        .space-y-5 > * + * { margin-top: 1.25rem; }

        .loader { text-align: center; }
        .loader svg { animation: spin 1s linear infinite; height: 2rem; width: 2rem; color: var(--primary-color); margin: 0 auto; }
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        .error-message { text-align: center; padding: 1rem; background-color: rgba(239, 68, 68, 0.1); color: #dc2626; border-radius: 0.5rem; }
        .word-info-header { display: flex; align-items: center; justify-content: space-between; padding-bottom: 1rem; border-bottom: 1px solid var(--border-color); }
        .word-info-header-text h2 { font-size: 2.25rem; font-weight: 700; }
        .word-info-header-text p { font-size: 1.125rem; color: var(--primary-text-color); margin-top: 0.25rem; }
        .header-buttons { display: flex; align-items: center; gap: 0.5rem; }
        .play-audio-button { width: 56px; height: 56px; background-color: var(--primary-light-color); color: var(--primary-text-color); border-radius: 50%; display: flex; align-items: center; justify-content: center; border: none; cursor: pointer; transition: background-color 0.2s, transform 0.2s; }
        .play-audio-button:hover { background-color: rgba(128, 92, 148, 0.25); transform: scale(1.05); }
        .play-audio-button svg { width: 28px; height: 28px; stroke: currentColor; }

        .meaning-card { padding: 1.25rem; background-color: var(--input-bg-color); border-radius: 0.75rem; border: 1px solid var(--border-color); }
        .part-of-speech-header { display: flex; align-items: center; margin-bottom: 0.75rem; }
        .part-of-speech-header h3 { font-size: 1.25rem; font-weight: 600; text-transform: capitalize; }
        .divider { flex-grow: 1; height: 1px; background-color: var(--border-color); margin-left: 1rem; }
        .definitions-list { list-style: none; color: var(--text-muted-color); }
        .definitions-list li + li { margin-top: 0.75rem; }
        .definitions-list li { display: flex; }
        .definitions-list .bullet { color: var(--primary-color); margin-right: 0.75rem; margin-top: 0.25rem; }
        .definitions-list .example { font-style: italic; margin-top: 0.25rem; color: var(--text-muted-color); opacity: 0.8; }
        .synonyms-container { margin-top: 1rem; }
        .synonyms-container h4 { font-weight: 600; margin-right: 0.5rem; }
        .synonyms-tags { display: flex; flex-wrap: wrap; gap: 0.5rem; margin-top: 0.5rem; }
        .synonym-tag { background-color: var(--primary-light-color); color: var(--primary-text-color); font-size: 0.875rem; font-weight: 500; padding: 0.25rem 0.625rem; border-radius: 9999px; }
        html.dark .synonym-tag { background-color: #4b5563; color: #f9fafb; }
        
        .initial-message { text-align: center; padding: 2.5rem 0; }
        .initial-message svg { margin: 0 auto 1rem auto; width: 60px; height: 60px; stroke-width: 1.5; color: #9ca3af; }
        .initial-message h3 { font-size: 1.25rem; font-weight: 500; color: var(--text-color); }
        .initial-message p { color: var(--text-muted-color); }
        
        .tab-nav { display: flex; justify-content: center; margin-bottom: 1.5rem; border-bottom: 1px solid var(--border-color); }
        .tab-btn { padding: 0.75rem 1.5rem; background: none; border: none; border-bottom: 2px solid transparent; color: var(--text-muted-color); font-weight: 600; cursor: pointer; transition: color 0.2s, border-color 0.2s; }
        .tab-btn.active { color: var(--primary-color); border-bottom-color: var(--primary-color); }
        .tab-btn:hover { color: var(--primary-color); }
        .tab-btn .fas { margin-right: 0.5rem; }

        .tab-content { display: none; }
        .tab-content.active { display: block; animation: fadeIn 0.5s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* Generic input styling for translator and grammar */
        textarea { width: 100%; padding: 0.75rem; background-color: var(--input-bg-color); border: 2px solid var(--border-color); border-radius: 0.5rem; color: var(--text-color); margin-bottom: 1rem; resize: vertical; font-family: 'Inter', sans-serif; font-size: 1rem; }
        textarea:focus { outline: none; border-color: transparent; box-shadow: 0 0 0 3px var(--primary-light-color); }
        select { width: 100%; padding: 0.75rem; background-color: var(--input-bg-color); border: 2px solid var(--border-color); border-radius: 0.5rem; color: var(--text-color); margin-bottom: 1rem; }
        
        .tab-content h4 { font-size: 1.25rem; font-weight: 600; margin-bottom: 1rem; text-align: center; }
        .translate-output, .grammar-output { margin-top: 1rem; padding: 1rem; background-color: var(--input-bg-color); border-radius: 0.5rem; border: 1px solid var(--border-color); min-height: 40px; }
        
        .feature-section { margin-bottom: 1.5rem; padding: 1rem; background-color: var(--input-bg-color); border-radius: 0.5rem; border: 1px solid var(--border-color); }
        .feature-section h5 { margin: 0 0 0.5rem 0; color: var(--primary-color); font-weight: 600; }
        .feature-section p { margin: 0; font-size: 1.25rem; font-weight: 500; color: var(--text-color); }

        .modal { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.5); backdrop-filter: blur(5px); }
        .modal-content { background-color: var(--card-bg-color); margin: 15% auto; padding: 0; border-radius: 0.75rem; width: 90%; max-width: 600px; max-height: 80vh; overflow-y: auto; box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04); }
        .modal-header { display: flex; justify-content: space-between; align-items: center; padding: 1.5rem; border-bottom: 1px solid var(--border-color); }
        .modal-header h2 { margin: 0; font-size: 1.5rem; color: var(--text-color); }
        .close-modal { background: none; border: none; font-size: 2rem; cursor: pointer; color: var(--text-muted-color); padding: 0; transition: color 0.2s; }
        .close-modal:hover { color: var(--text-color); }
        .modal-body { padding: 1.5rem; }
        .help-section { margin-bottom: 1.5rem; }
        .help-section h3 { margin-bottom: 0.5rem; font-size: 1.125rem; color: var(--primary-color); }
        .help-section ul { padding-left: 1.5rem; }
        .help-section li { margin-bottom: 0.25rem; line-height: 1.5; }
    </style>
</head>
<body>

    <div class="container">
        <div class="card">
            <div class="top-buttons">
                <button id="help-btn" class="icon-button" title="Help & Instructions">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path><line x1="12" x2="12" y1="17" y2="17"></line></svg>
                </button>
                <button id="theme-toggle" class="icon-button" title="Toggle light/dark mode">
                    <svg id="theme-toggle-dark-icon" class="hidden" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg>
                    <svg id="theme-toggle-light-icon" class="hidden" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg>
                </button>
            </div>
            <h1>Wordify</h1>
            <p class="subtitle">Your ultimate tool for language exploration.</p>

            <div class="tab-nav">
                <button class="tab-btn active" data-tab="dictionary"><i class="fas fa-book"></i> Dictionary</button>
                <button class="tab-btn" data-tab="grammar"><i class="fas fa-spell-check"></i> Grammar</button>
                <button class="tab-btn" data-tab="translator"><i class="fas fa-language"></i> Translator</button>
                <button class="tab-btn" data-tab="features"><i class="fas fa-star"></i> Features</button>
            </div>

            <div id="dictionary-tab" class="tab-content active">
                <div class="search-container">
                    <input type="text" id="word-input" placeholder="Search for a word..." class="word-input">
                    <div class="input-controls">
                        <button id="mic-button" class="mic-button" title="Search with voice">
                             <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z"></path><path d="M19 10v2a7 7 0 0 1-14 0v-2"></path><line x1="12" x2="12" y1="19" y2="22"></line></svg>
                        </button>
                        <button id="search-button" class="search-button">Search</button>
                    </div>
                </div>

                <div id="result-container" class="space-y-6">
                    <div id="loader" class="loader hidden">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" style="opacity: 0.25;"></circle><path fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z" style="opacity: 0.75;"></path></svg>
                    </div>
                    <div id="error-message" class="error-message hidden"></div>
                    <div id="word-info" class="hidden">
                        <div class="word-info-header">
                            <div class="word-info-header-text">
                                <h2 id="word"></h2>
                                <p id="phonetic"></p>
                            </div>
                            <div class="header-buttons">
                                <button id="play-audio" class="play-audio-button">
                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon><path d="M15.54 8.46a5 5 0 0 1 0 7.07"></path></svg>
                                </button>
                            </div>
                        </div>
                    </div>
                    <div id="meanings-container" class="space-y-5"></div>
                </div>
                <div id="initial-message" class="initial-message">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20"></path></svg>
                    <h3>Find Your Word</h3>
                    <p>Start by typing a word in the search box above.</p>
                </div>
            </div>

            <div id="translator-tab" class="tab-content">
                <h4>Translate Text</h4>
                <textarea id="translate-input" placeholder="Enter text to translate..." rows="4"></textarea>
                <select id="translate-language-select">
                    <option value="es">Spanish</option>
                    <option value="fr">French</option>
                    <option value="de">German</option>
                    <option value="ja">Japanese</option>
                    <option value="hi">Hindi</option>
                    <option value="ta">Tamil</option>
                </select>
                <button id="translate-btn" class="search-button">Translate</button>
                <div id="translate-output" class="translate-output"></div>
            </div>

            <div id="grammar-tab" class="tab-content">
                <h4>Check Grammar</h4>
                <textarea id="grammar-input" placeholder="Enter text to check grammar..." rows="4"></textarea>
                <button id="check-grammar-btn" class="search-button">Check Grammar</button>
                <div id="grammar-output" class="grammar-output"></div>
            </div>

            <div id="features-tab" class="tab-content">
                <h4>Word Statistics & Features</h4>
                <div id="features-content">
                    <div class="feature-section">
                        <h5>Words Learned Today</h5>
                        <p id="words-today">0</p>
                    </div>
                    <div class="feature-section">
                        <h5>Word of the Day</h5>
                        <p id="word-of-day">Loading...</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <audio id="audio-player"></audio>

    <div id="help-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Help & Instructions</h2>
                <button id="close-help-modal" class="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="help-section">
                    <h3>Dictionary Tab</h3>
                    <ul>
                        <li>Type a word and click Search or press Enter.</li>
                        <li>Use the microphone icon for voice search.</li>
                        <li>Click the speaker icon to hear the pronunciation.</li>
                    </ul>
                </div>
                 <div class="help-section">
                    <h3>All Tabs</h3>
                    <ul>
                        <li>Switch themes using the sun/moon icon.</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // DOM Elements
            const wordInput = document.getElementById('word-input');
            const searchButton = document.getElementById('search-button');
            const micButton = document.getElementById('mic-button');
            const resultContainer = document.getElementById('result-container');
            const loader = document.getElementById('loader');
            const errorMessage = document.getElementById('error-message');
            const wordInfo = document.getElementById('word-info');
            const wordEl = document.getElementById('word');
            const phoneticEl = document.getElementById('phonetic');
            const playAudioButton = document.getElementById('play-audio');
            const audioPlayer = document.getElementById('audio-player');
            const meaningsContainer = document.getElementById('meanings-container');
            const initialMessage = document.getElementById('initial-message');
            const themeToggleButton = document.getElementById('theme-toggle');
            const themeToggleDarkIcon = document.getElementById('theme-toggle-dark-icon');
            const themeToggleLightIcon = document.getElementById('theme-toggle-light-icon');
            const helpBtn = document.getElementById('help-btn');
            const helpModal = document.getElementById('help-modal');
            const closeHelpModal = document.getElementById('close-help-modal');

            // THEME LOGIC
            const applyTheme = (theme) => {
                if (theme === 'dark') {
                    document.documentElement.classList.add('dark');
                    themeToggleLightIcon.classList.remove('hidden');
                    themeToggleDarkIcon.classList.add('hidden');
                } else {
                    document.documentElement.classList.remove('dark');
                    themeToggleLightIcon.classList.add('hidden');
                    themeToggleDarkIcon.classList.remove('hidden');
                }
            };
            
            const savedTheme = localStorage.getItem('color-theme') || (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
            applyTheme(savedTheme);

            themeToggleButton.addEventListener('click', () => {
                const isDark = document.documentElement.classList.toggle('dark');
                const newTheme = isDark ? 'dark' : 'light';
                localStorage.setItem('color-theme', newTheme);
                applyTheme(newTheme);
            });

            // HELP MODAL
            helpBtn.addEventListener('click', () => helpModal.style.display = 'block');
            closeHelpModal.addEventListener('click', () => helpModal.style.display = 'none');
            window.addEventListener('click', (e) => e.target === helpModal && (helpModal.style.display = 'none'));

            // SPEECH RECOGNITION
            const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
            if (SpeechRecognition) {
                const recognition = new SpeechRecognition();
                recognition.lang = 'en-US';
                micButton.addEventListener('click', () => recognition.start());
                recognition.onstart = () => micButton.classList.add('mic-active');
                recognition.onend = () => micButton.classList.remove('mic-active');
                recognition.onresult = (e) => {
                    wordInput.value = e.results[0][0].transcript;
                    searchButton.click();
                };
            } else {
                micButton.disabled = true;
            }

            // SEARCH LOGIC
            const searchWord = async () => {
                const word = wordInput.value.trim();
                if (!word) return;
                hideAll();
                loader.classList.remove('hidden');
                try {
                    const response = await fetch(`https://api.dictionaryapi.dev/api/v2/entries/en/${word}`);
                    if (!response.ok) {
                        const errorData = await response.json();
                        throw new Error(errorData.title || 'Word not found.');
                    }
                    const data = await response.json();
                    displayResults(data[0]);
                } catch (error) {
                    displayError(error.message);
                } finally {
                    loader.classList.add('hidden');
                }
            };

            searchButton.addEventListener('click', searchWord);
            wordInput.addEventListener('keyup', (e) => e.key === 'Enter' && searchWord());

            const displayResults = (data) => {
                initialMessage.classList.add('hidden');
                wordInfo.classList.remove('hidden');
                
                wordEl.textContent = data.word;
                phoneticEl.textContent = data.phonetic || (data.phonetics.find(p => p.text)?.text || '');
                
                const audioSrc = data.phonetics.find(p => p.audio)?.audio;
                playAudioButton.classList.toggle('hidden', !audioSrc);
                if (audioSrc) {
                    audioPlayer.src = audioSrc;
                    playAudioButton.onclick = () => audioPlayer.play();
                }

                meaningsContainer.innerHTML = data.meanings.map(meaning => {
                    const definitions = meaning.definitions.slice(0, 3).map(def => `<li><span class="bullet">&#10148;</span><div><p>${def.definition}</p>${def.example ? `<p class="example">e.g. "${def.example}"</p>` : ''}</div></li>`).join('');
                    const synonyms = meaning.synonyms.length > 0 ? `<div class="synonyms-container"><h4>Synonyms:</h4><div class="synonyms-tags">${meaning.synonyms.slice(0, 5).map(syn => `<span class="synonym-tag">${syn}</span>`).join('')}</div></div>` : '';
                    return `<div class="meaning-card"><div class="part-of-speech-header"><h3>${meaning.partOfSpeech}</h3><div class="divider"></div></div><ul class="definitions-list">${definitions}</ul>${synonyms}</div>`;
                }).join('');
            };

            const displayError = (message) => {
                hideAll();
                initialMessage.classList.add('hidden');
                errorMessage.textContent = message;
                errorMessage.classList.remove('hidden');
            };

            const hideAll = () => {
                errorMessage.classList.add('hidden');
                wordInfo.classList.add('hidden');
                meaningsContainer.innerHTML = '';
                loader.classList.add('hidden');
            };

            // TAB SWITCHING
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    const tabId = btn.dataset.tab + '-tab';
                    document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
                    document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                    btn.classList.add('active');
                    document.getElementById(tabId).classList.add('active');
                });
            });

            // TRANSLATOR LOGIC
            const translateText = async () => {
                const text = document.getElementById('translate-input').value.trim();
                const lang = document.getElementById('translate-language-select').value;
                const outputEl = document.getElementById('translate-output');
                if (!text) return;
                outputEl.textContent = 'Translating...';
                try {
                    const response = await fetch(`https://api.mymemory.translated.net/get?q=${encodeURIComponent(text)}&langpair=en|${lang}`);
                    const data = await response.json();
                    outputEl.textContent = data.responseData.translatedText || 'Translation failed.';
                } catch (error) {
                    outputEl.textContent = 'Translation failed.';
                }
            };
            document.getElementById('translate-btn').addEventListener('click', translateText);

            // GRAMMAR CHECKER LOGIC
            const checkGrammar = async () => {
                const text = document.getElementById('grammar-input').value.trim();
                const outputEl = document.getElementById('grammar-output');
                if (!text) return;
                outputEl.innerHTML = 'Checking...';
                try {
                    const response = await fetch('https://api.languagetool.org/v2/check', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
                        body: new URLSearchParams({ text: text, language: 'en-US' })
                    });
                    const data = await response.json();
                    if (data.matches.length === 0) {
                        outputEl.innerHTML = '<p>No grammar issues found!</p>';
                    } else {
                        let html = `<p>Found ${data.matches.length} issue(s):</p><ul>`;
                        data.matches.forEach(match => {
                            html += `<li><strong>${match.message}</strong> Suggestion: <em>${match.replacements[0]?.value || 'N/A'}</em></li>`;
                        });
                        html += '</ul>';
                        outputEl.innerHTML = html;
                    }
                } catch (error) {
                    outputEl.innerHTML = '<p>Error checking grammar. Please try again.</p>';
                }
            };
            document.getElementById('check-grammar-btn').addEventListener('click', checkGrammar);
            
            // FEATURES
            const loadFeatures = () => {
                const wordOfDayWords = ['serendipity', 'ephemeral', 'quintessential', 'ubiquitous', 'resilient'];
                const wordsTodayCount = localStorage.getItem('words-today') || 0; // This is a placeholder; needs more logic for daily reset
                document.getElementById('words-today').textContent = wordsTodayCount;
                const today = new Date().getDate();
                const wotd = wordOfDayWords[today % wordOfDayWords.length];
                document.getElementById('word-of-day').textContent = wotd;
            };

            loadFeatures();
            
        });
    </script>
</body>
</html>